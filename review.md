# dashboard レビュー（CTO視点 / メンテナンス性重視）

対象:
- `index.html`
- `ecosystem.html`
- `levels.html`
- `portfolio.html`
- `revenue.html`
- `action.html`
- `skills.html`
- `style.css`
- `theme.js`

前提:
- 内部用ツールとしては十分に成立しています。
- 今回は「今後、文言やデザインを小刻みに更新しやすいか」を中心に見ています。

## 総評
- UIの統一感は高く、デザインシステム（トークン）も一定整理されています。
- 一方で、`HTML`に構造・文言・見た目指定が分散しており、**小さな更新でも複数ファイルを同時編集**しやすい構成です。
- 今の規模なら運用可能ですが、更新頻度が上がると「反映漏れ」「差分レビュー負荷」が増えるリスクがあります。

## 指摘事項（優先度順）

### 1. 共通ナビ/サイドバーが7ページに重複している（優先度: 高）
- 根拠:
  - `index.html:14`
  - `ecosystem.html:13`
  - `levels.html:13`
  - `portfolio.html:13`
  - `revenue.html:13`
  - `action.html:13`
  - `skills.html:13`
- 影響:
  - メニュー文言変更、リンク追加、並び替え時に7ファイル修正が必要。
  - 1箇所でも漏れるとUX不整合が発生。
- 提案:
  - 共通レイアウト化（テンプレート化）を最優先。
  - 例: `partials/sidebar.html` + ページごとに `data-page="index"` を指定して active をJSで付与。

### 2. 固定値（作成日、active状態）が各HTMLに散在（優先度: 高）
- 根拠:
  - 固定日付: `index.html:42` ほか全ページ（`2026-02-13`）
  - active指定: 各ページの `class="nav-link active"`（例: `index.html:24`, `skills.html:31`）
- 影響:
  - 日付更新・ページ追加時に手作業箇所が増え、ミスが起きやすい。
- 提案:
  - `theme.js`または別JSで `lastUpdated` を1箇所管理して描画。
  - activeは `location.pathname` から自動判定。

### 3. インライン`style`が多く、デザイン更新の局所修正が難しい（優先度: 中）
- 根拠:
  - `style=`件数: `index.html` 13件、`skills.html` 9件、`levels.html` 8件、`ecosystem.html` 8件 など
  - 例: `index.html:119`, `portfolio.html:46`, `action.html:83`, `revenue.html:100`
- 影響:
  - 色や余白の調整でCSS一元管理が効かない。
  - 同じ見た目ルールがHTML内に再散在しやすい。
- 提案:
  - `style.css`にユーティリティ/バリアントクラスを追加して置換（例: `.border-left-gold`, `.muted-card`, `.mb-8`）。

### 4. HTMLに`onclick`が埋め込まれており、挙動変更時の追従点が多い（優先度: 中）
- 根拠:
  - 全ページに `onclick` 2件ずつ（モバイルトグル・テーマ切替）
  - 例: `index.html:11`, `index.html:45`
- 影響:
  - 挙動改善（キーボード操作、アニメ、ログ取得）時に全ページ改修が必要。
- 提案:
  - `theme.js`側でイベント委譲して `data-action="toggle-theme"` 等に寄せる。

### 5. CSSの`nth-child`依存が順序変更に弱い（優先度: 中）
- 根拠:
  - タイムライン色分け: `style.css:566-569`
  - アニメ遅延: `style.css:842-849`
  - フライホイール配置: `style.css:660-665`
- 影響:
  - 文言追加やカード順入れ替え時に意図しない色・配置・アニメが起こりやすい。
- 提案:
  - 構造依存を減らし、`data-stage`, `.delay-1` など意味ベースのクラスへ移行。

### 6. コンテンツ（文言）とマークアップが密結合（優先度: 中）
- 根拠:
  - 長文テキストが各HTMLへ直接埋め込み（全ページ）
- 影響:
  - 表現調整のたびにHTML差分が大きくなり、レビューしにくい。
- 提案:
  - 文言を `content/*.json` または `content/*.md` に切り出し、描画時に読み込む方式を検討（静的運用でも可）。

## 良い点（維持推奨）
- デザイントークンが`style.css`冒頭で定義されており、テーマ変更の基盤がある（`style.css:8` 以降）。
- `theme.js`は責務が小さく、軽量で把握しやすい。
- カード・グリッド・バッジなど再利用クラスが既にあるため、テンプレート化と相性が良い。

## まず着手する順番（現実的な3ステップ）
1. サイドバー/ヘッダーの共通化（重複削減の効果が最大）
2. インライン`style`のクラス化（見た目更新コストを削減）
3. active判定・作成日の自動化（運用ミスを抑止）

以上です。内部用として「今すぐ全面リライトが必要」な状態ではありませんが、上の3ステップだけでも今後の微修正コストはかなり下がります。
